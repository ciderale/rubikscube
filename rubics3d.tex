\documentclass[varwidth=\maxdimen]{standalone}
\usepackage{tikz}
\usetikzlibrary{3d}
\usetikzlibrary{patterns}
\usepackage{ifthen}


% Define colors
\definecolor{red}{RGB}{255,0,0}
\definecolor{green}{RGB}{0,255,0}
\definecolor{blue}{RGB}{0,0,255}
\definecolor{yellow}{RGB}{255,255,0}
\definecolor{white}{RGB}{255,255,255}
\definecolor{orange}{RGB}{255,165,0}

% Define the function to draw a single cubicle
\newcommand{\drawcubicle}[5][X]{
  \ifthenelse{\equal{#1}{X}}{
  \begin{scope}[shift={#2}]
    % Front face
    \begin{scope}[canvas is xy plane at z=0]
      \path[draw=black,#3] (0,0) rectangle (1,1);
    \end{scope}
    % Top face
    \begin{scope}[canvas is xz plane at y=1]
      \path[draw=black,#4] (0,0) rectangle (1,1);
    \end{scope}
    % Right face
    \begin{scope}[canvas is yz plane at x=1]
      \path[draw=black,#5] (0,0) rectangle (1,1);
    \end{scope}
  \end{scope}
}{}
}

\newcommand{\cubeCanvas}{
  % Draw the Rubik's Cube
  \foreach \x in {0,1,2} {
    \foreach \y in {0,1,2} {
      \foreach \z in {2,1,0} {
        \drawcubicle{(\x,\y,\z)}{draw=white}{draw=white}{draw=white}
      }
    }
  }
}


\pgfdeclarepatternformonly{upwards arrows}
  {\pgfpointorigin}{\pgfpoint{1cm}{0.3cm}}{\pgfpoint{1cm}{0.3cm}}
  {
  % Draw the triangles
  \pgfpathmoveto{\pgfpoint{0}{0}}
  \pgfpathlineto{\pgfpoint{0.25cm}{0}}
  \pgfpathlineto{\pgfpoint{0.5cm}{0.15cm}}
  \pgfpathlineto{\pgfpoint{0.75cm}{0}}
  \pgfpathlineto{\pgfpoint{1cm}{0}}
  \pgfpathlineto{\pgfpoint{0.5cm}{0.3cm}}
  \pgfpathlineto{\pgfpoint{0}{0}}
  \pgfpathclose
  \pgfusepath{fill}
}

\tikzset{inner/.style={fill=gray!50!white,draw=black}}

\begin{document}

\tikzset{front/.style={fill=red}}
\tikzset{top/.style={fill=white}}
\tikzset{right/.style={fill=blue}}
\input{00_initial.tex}%
\input{01_top_cross.tex}%
\input{02_top_layer.tex}%

\tikzset{front/.style={fill=blue}}
\tikzset{top/.style={fill=yellow}}
\tikzset{right/.style={fill=red}}
\input{03_top_layer_upside_down.tex}%
\input{04_middle_cross.tex}%
\input{05_top_cross_almost.tex}%

\input{06_top_cross.tex}%
\tikzset{front/.style={fill=red}}
\tikzset{top/.style={fill=green}}
\tikzset{right/.style={fill=white}}
\input{07_top_cross_rotated.tex}%
\input{08_final.tex}%

\end{document}
